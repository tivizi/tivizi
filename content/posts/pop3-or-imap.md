---
title: "POP3还是IMAP？"
date: 2020-07-20T10:10:35+08:00
toc: false
images:
tags: 
  - untagged
---
假如，我要给你发一封电子邮件，同时，我们的邮箱是由不同的邮件服务商提供的，此时，这封邮件会如何传递到你手中呢？

一般情况下，给你发送的邮件会以如下流程传递：

**写邮件** - - SMTP协议- -> **我的邮箱服务器**- - SMTP协议 - -> **你的邮箱服务器** -> **你**

邮件服务器间推送邮件使用`SMTP`协议。理论上，`你的邮箱服务器 -> 你`这段邮件传递也必然有协议支持。

是的，目前，接收邮件比较流行的协议有2个，`POP3`和`IMAP`。

支持`POP3`的邮件服务器在收到用户相关邮件后直接保存在服务器，随时等待用户去收取。它支持2种收取方式，
1) 下载并删除。用户用一个终端以该种方式收取邮件后，用户可以在终端进行邮件分类等操作，服务器端邮件已删除，意味着换终端后将不能查看到已收到的邮件。
2) 下载并保留。用户在一个终端以该种方式收取邮件后，也可以在此终端进行邮件归档，换了终端后，依然可以重新获取邮件，就像从来没有收取过一样。

嗯，挺好，有了POP3后，可以满足大部分邮件接收情景了。但是，`就像从来没有收取过一样`出现了大麻烦，我在某个终端辛辛苦苦归档的非常有用的邮件，在我换了终端后，不见了，这是个不小的损失。

这时候`IMAP`协议应运而生。支持`IMAP`协议的邮件服务器在收到用户的邮件后，全部归档在`INBOX`文件夹下，用户可以在终端发送一些管理命令，在服务端整理邮件，这样，不论是移动、删除邮件，在哪个终端看到的效果都是一样的。

总结来说，`POP3`服务器对邮件不做用户相关的状态保持，实现上比较简单。`IMAP`服务器，实现上复杂些但更有用。

所以，请使用`IMAP`来收取邮件！

事实上，市场上的产品都是用的`POP3S`和`IMAPS`协议，它们被套了层安全协议，避免了明文信息传输。

> `POP3` Post Office Protocol — Version3 第三版邮局协议。由 `RFC 1939`定义。
> `IMAP` Internet Mail Access Protocol 互联网邮件访问协议。由`RFC 3501`定义。
